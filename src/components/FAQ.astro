---
// 1. Добавляем render в импорт
import { getCollection, render } from 'astro:content';

const allFaqs = await getCollection('faq');
const sortedFaqs = allFaqs.sort((a, b) => a.data.order - b.data.order);
---

<section id="faq" class="py-24 bg-base-100 reveal">
  <div class="max-w-[85rem] px-4 sm:px-6 lg:px-8 mx-auto">
    <div class="max-w-2xl mx-auto text-center mb-10 lg:mb-14">
      <h2 class="text-3xl font-heading font-black text-primary sm:text-4xl uppercase tracking-tight">
        Często Zadawane <span class="text-primary">Pytania</span>
      </h2>
    </div>

    <div class="max-w-3xl mx-auto space-y-4">
        
        {sortedFaqs.map(async (faq, index) => {
          // 2. ИСПРАВЛЕНИЕ: Используем функцию render(faq) вместо faq.render()
          const { Content } = await render(faq);
          
          return (
            <div class="collapse collapse-plus bg-base-100 border border-base-200 rounded-2xl shadow-sm hover:shadow-md transition-shadow">
              <input type="radio" name="faq-accordion" id={`faq-${faq.id}`} checked={index === 0} />
              <div class="collapse-title text-xl font-heading font-bold text-base-content pr-12">
                {faq.data.question}
              </div>
              <div class="collapse-content">
                <div class="text-base-content/70 leading-relaxed font-sans pt-2">
                  <Content />
                </div>
              </div>
            </div>
          );
        })}

    </div>
  </div>
</section>