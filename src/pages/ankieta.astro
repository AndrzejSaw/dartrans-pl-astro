---
export const prerender = false;
import MainLayout from '../layouts/MainLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import ApplicationForm from '../components/ApplicationForm.astro';
import VacancyGrid from '../components/vacancy/VacancyGrid.astro';

const COMPANY_NAME = import.meta.env.COMPANY_NAME || 'DARTRANS & HENZEL Sp. z o.o.';
const COMPANY_ADDRESS_STREET = import.meta.env.COMPANY_ADDRESS_STREET || 'ul. Główna 97';
const COMPANY_ADDRESS_POSTAL = import.meta.env.COMPANY_ADDRESS_POSTAL || '62-007';
const COMPANY_ADDRESS_CITY = import.meta.env.COMPANY_ADDRESS_CITY || 'Biskupice';
const SITE_NAME = import.meta.env.SITE_NAME || 'Dartrans & Henzel';

const token = Astro.url.searchParams.get('token');

if (!token) {
  return Astro.redirect('/#apply');
}
---

<MainLayout title={`Ankieta Kierowcy | ${SITE_NAME}`}>
  <meta name="robots" content="noindex, nofollow" slot="head" />

  <Header />

  <main>
    <!-- Hero Section -->
    <section class="relative bg-neutral pt-32 pb-20 lg:pt-40 lg:pb-28 overflow-hidden">
      <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-full bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-primary/10 via-transparent to-transparent -z-10"></div>
      <div class="max-w-[85rem] mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-heading font-black text-white uppercase tracking-tighter mb-6">
          Ankieta <span class="text-primary">Kierowcy</span>
        </h1>
        <p class="text-lg md:text-xl font-sans text-white/70 max-w-2xl mx-auto">
          Prosimy zapoznać się ze szczegółową ofertą pracy i wypełnić pełny formularz aplikacyjny poniżej.
        </p>
      </div>
    </section>

    <!-- Vacancy Details Section -->
    <section class="py-24 md:py-32 bg-base-100 reveal">
      <div class="max-w-[85rem] mx-auto px-4 sm:px-6 lg:px-8">
        
        <!-- Section Title -->
        <div class="max-w-2xl mx-auto text-center mb-16">
          <div class="inline-block px-6 py-2 bg-primary/10 rounded-full mb-4">
            <span class="text-primary font-heading font-bold uppercase text-xs tracking-[0.2em]">Oferta</span>
          </div>
          <h2 class="text-4xl font-heading font-extrabold text-base-content sm:text-5xl uppercase tracking-tight">
            Warunki <span class="text-primary">Zatrudnienia</span>
          </h2>
          <p class="mt-6 text-base md:text-lg font-sans text-base-content/60 leading-relaxed">
            Sprawdź szczegóły naszej oferty pracy dla kierowców C+E
          </p>
        </div>

        <!-- Vacancy Grid -->
        <VacancyGrid />

      </div>
    </section>

    <!-- Divider -->
    <div class="relative h-px bg-gradient-to-r from-transparent via-primary/20 to-transparent max-w-7xl mx-auto"></div>

    <!-- Application Form Section -->
    <section class="py-24 md:py-32 bg-base-100 reveal">
      <div class="max-w-[85rem] mx-auto px-4 sm:px-6 lg:px-8">
        
        <!-- Form Title -->
        <div class="max-w-2xl mx-auto text-center mb-12">
          <div class="inline-block px-6 py-2 bg-primary/10 rounded-full mb-4">
            <span class="text-primary font-heading font-bold uppercase text-xs tracking-[0.2em]">Gotowy dołączyć?</span>
          </div>
          <h2 class="text-3xl md:text-4xl font-heading font-black text-base-content uppercase tracking-tight mb-4">
            Twoja <span class="text-primary">Aplikacja</span>
          </h2>
          <p class="text-base-content/60 text-base max-w-2xl mx-auto leading-relaxed">
            Wypełnij szczegółowy formularz poniżej. Nasz zespół rekrutacyjny przeanalizuje Twoją aplikację w ciągu <span class="font-bold text-primary">24-48 godzin</span> i skontaktuje się z Tobą przez WhatsApp lub email.
          </p>
        </div>

        <ApplicationForm token={token} />

      </div>
    </section>
  </main>

  <Footer />